{"version":3,"sources":["components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Profile.js","components/Card.js","components/CardsSection.js","components/Main.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/InfoTooltip.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","utils/Api.js","utils/apiAuth.js","components/App.js","index.js"],"names":["Header","onSignOut","userData","className","exact","path","email","to","onClick","Footer","currentDate","Date","getFullYear","CurrentUserContext","React","createContext","Profile","props","currentUser","useContext","onEditAvatar","src","avatar","alt","name","type","onEditProfile","about","onAddPlace","Card","card","owner","_id","onCardDelete","link","onCardClick","likes","some","i","onCardLike","length","CardsSection","children","Main","cards","map","PopupWithForm","isOpen","onMouseDown","onClose","e","stopPropagation","title","method","onSubmit","buttonText","EditProfilePopup","useState","setName","description","setDescription","useEffect","preventDefault","onUpdateUser","placeholder","id","minLength","maxLength","required","value","onChange","target","EditAvatarPopup","inputAvatarUrlRef","useRef","current","onUpdateAvatar","ref","AddPlacePopup","setLink","ImagePopup","data","InfoTooltip","isSuccess","Login","onLoginSubmit","setEmail","password","setPassword","Register","onRegisterSubmit","ProtectedRoute","Component","component","loggedIn","api","config","this","_baseUrl","baseUrl","_headers","headers","fetch","then","res","_handleResponse","ok","json","Promise","reject","status","body","JSON","stringify","cardId","isLiked","_makeUnlike","_makeLike","authorization","BASE_URL","handleResponse","App","history","useHistory","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","cardToDelete","isCardDeleteConfirmOpen","setIsCardDeleteConfirmOpen","selectedCard","setSelectedCard","setCurrentUser","setUserData","setCards","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","isLoggedIn","setIsLoggedIn","closeAllPopups","tokenCheck","token","jwt","localStorage","getItem","push","catch","error","console","log","all","getInitialCards","getUserInfo","user","closeByEscape","event","key","document","addEventListener","removeEventListener","Provider","removeItem","changeLikeCardStatus","newCard","state","c","setItem","apiAuth","editUserInfo","onOvelayClick","editUserAvatar","postCard","deleteCard","filter","handleCardDelete","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.9b0d59e8.chunk.js","sourcesContent":["import { Route, Switch, Link } from 'react-router-dom';\n\n\nfunction Header({ onSignOut, userData }) {\n\n  return (\n    <header className=\"header\">\n      <div className=\"header__logo\"></div>\n      <Switch>\n        <Route exact path=\"/\">\n          <div className=\"header__user-email-logout\">\n            <p className=\"header__user-email\">{userData.email}</p>\n            <Link to=\"login\" className=\"header__logout-link\" onClick = {onSignOut}>Выйти</Link>\n          </div>\n        </Route>\n        <Route path=\"/register\">\n          <Link to=\"login\" className=\"header__login-link\">Войти</Link>\n        </Route>\n        <Route path=\"/login\">\n          <Link to=\"register\" className=\"header__login-link\">Регистрация</Link>\n        </Route>\n      </Switch>\n    </header>\n  )\n}\n\nexport default Header;\n","function Footer() {\n  const currentDate = new Date()\n  return (\n  <footer className=\"footer\">\n    <p className=\"footer__copyright\">&copy; {currentDate.getFullYear()}. Mesto Russia. Иван Цыпкин</p>\n  </footer>\n  )\n}\n\nexport default Footer;\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();\n","import { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { useContext } from 'react';\n\n\nexport default function Profile(props) {\n\n  const currentUser = useContext(CurrentUserContext);\n\n  return (\n    <section className=\"profile\">\n      <div className=\"profile__avatar-container\" onClick={props.onEditAvatar}>\n        <img\n          src={currentUser.avatar}\n          alt=\"Аватар пользователя\"\n          className=\"profile__avatar\"\n        />\n      </div>\n      <div className=\"profile__info\">\n        <h1 className=\"profile__name\">{currentUser.name}</h1>\n        <button\n          type=\"button\"\n          className=\"profile__edit-button\"\n          aria-label=\"Редактировать профиль\"\n          onClick={props.onEditProfile}\n        ></button>\n        <p className=\"profile__job\">{currentUser.about}</p>\n      </div>\n      <button\n        type=\"button\"\n        className=\"profile__add-button\"\n        aria-label=\"Добавить место\"\n        onClick={props.onAddPlace}\n      ></button>\n    </section>\n  )\n}\n","import { useContext } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nexport default function Card(props) {\n\n  const currentUser = useContext(CurrentUserContext);\n\n  return (\n    <li className=\"cards__item\">\n      {(props.card.owner._id === currentUser._id) &&\n        <button\n          type=\"button\"\n          className=\"cards__remove-button\"\n          aria-label=\"Удалить карточку\"\n          onClick = {() => props.onCardDelete(props.card)}\n        ></button>\n      }\n      <img\n        src = {props.card.link}\n        alt = {props.card.name}\n        className=\"cards__image\"\n        onClick = {() => props.onCardClick(props.card)}\n      />\n      <div className=\"cards__caption\">\n        <h2 className=\"cards__image-caption\">{props.card.name}</h2>\n        <div className=\"cards__likes\">\n          <button\n            type=\"button\"\n            className={`cards__like-button ${(props.card.likes.some(i => i._id === currentUser._id)) ? 'cards__like-button_active' : ''}`}\n            aria-label=\"Поставить лайк\"\n            onClick={()=> props.onCardLike(props.card)}\n          ></button>\n          <span className=\"cards__likes-number\">{props.card.likes.length ? props.card.likes.length : ''}</span>\n        </div>\n      </div>\n    </li>\n  )\n}\n","export default function CardsSection(props) {\n  return (\n    <section className=\"cards\">\n      <ul className=\"cards__list\">\n        {props.children}\n      </ul>\n    </section>\n  )\n}\n","import Profile from './Profile';\nimport Card from './Card';\nimport CardsSection from './CardsSection';\n\n\nexport default function Main(props) {\n\n  return (\n    <main className=\"main\">\n      <Profile\n        {...props}\n      />\n      <CardsSection>\n        {props.cards.map(card => {\n            return (<Card\n              key = {card._id}\n              card = {card}\n              onCardDelete = {props.onCardDelete}\n              onCardClick = {props.onCardClick}\n              onCardLike = {props.onCardLike}\n\n            />)\n          })\n        }\n      </CardsSection>\n    </main>\n  )\n}\n","export default function PopupWithForm(props) {\n  return (\n    <div\n      className={`popup popup_type_${props.name} ${props.isOpen ? 'popup_opened' : ''}`}\n      onMouseDown = {props.onClose}\n    >\n      <div className=\"popup__container\" onMouseDown = {(e) => e.stopPropagation()}>\n        <button\n          type=\"button\"\n          className=\"popup__close-button\"\n          aria-label=\"Закрыть окно\"\n          onClick={props.onClose}\n        ></button>\n        <h3 className=\"popup__heading\">{props.title}</h3>\n        <form\n          className={`popup__form popup__form_type_${props.name}`}\n          method=\"POST\"\n          name={props.name}\n          onSubmit={props.onSubmit}\n        >\n          {props.children}\n          <button\n            type=\"submit\"\n            className=\"popup__submit-button\"\n            aria-label=\"Отправить данные\"\n          >{props.buttonText}</button>\n        </form>\n      </div>\n    </div>\n  )\n}\n","import { useState, useContext, useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nexport default function EditProfilePopup(props) {\n\n  const currentUser = useContext(CurrentUserContext);\n\n  const [name, setName] = useState(currentUser.name);\n  const [description, setDescription] = useState(currentUser.about);\n\n  useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, props.isOpen]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"edit\"\n      title=\"Редактировать профиль\"\n      isOpen = {props.isOpen}\n      onClose = {props.onClose}\n      buttonText=\"Сохранить\"\n      onSubmit = {handleSubmit}\n    >\n      <input\n        type=\"text\"\n        className=\"popup__form-item popup__form-item_value_name\"\n        placeholder=\"Имя\"\n        name=\"userName\"\n        id=\"user-name\"\n        minLength=\"2\"\n        maxLength=\"40\"\n        required\n        value={name || ''}\n        onChange={(e) => setName(e.target.value)}\n      />\n      <span className=\"user-name-error popup__form-error-msg\"></span>\n      <input\n        type=\"text\"\n        className=\"popup__form-item popup__form-item_value_job\"\n        placeholder=\"Род деятельности\"\n        name=\"userJob\"\n        id=\"user-job\"\n        minLength=\"2\"\n        maxLength=\"200\"\n        required\n        value={description || ''}\n        onChange={(e) => setDescription(e.target.value)}\n      />\n      <span className=\"user-job-error popup__form-error-msg popup__form-error-msg_pos_bottom\"></span>\n    </PopupWithForm>\n  )\n}\n","import { useRef, useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\n\nexport default function EditAvatarPopup(props) {\n\n  const inputAvatarUrlRef = useRef();\n\n  useEffect(() => {\n    inputAvatarUrlRef.current.value = '';\n  }, [props.isOpen])\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar({\n      avatar: inputAvatarUrlRef.current.value\n    });\n  }\n\n\n  return (\n    <PopupWithForm\n      name=\"edit-avatar\"\n      title=\"Обновить аватар\"\n      isOpen={props.isOpen}\n      onClose = {props.onClose}\n      buttonText=\"Сохранить\"\n      onSubmit={handleSubmit}\n    >\n      <input\n        ref={inputAvatarUrlRef}\n        type=\"url\"\n        className=\"popup__form-item popup__form-item_value_link\"\n        placeholder=\"Ссылка на аватар\"\n        name=\"avatarLink\"\n        id=\"avatar-link\"\n        required/>\n      <span className=\"avatar-link-error popup__form-error-msg\"></span>\n    </PopupWithForm>\n  )\n}\n","import { useState, useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\n\nexport default function AddPlacePopup(props) {\n\n  const [link, setLink] = useState('');\n  const [name, setName] = useState('');\n\n  useEffect(() => {\n    setLink('');\n    setName('')\n  }, [props.isOpen])\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onAddPlace({\n      link,\n      name\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"new-card\"\n      title=\"Новое место\"\n      isOpen = {props.isOpen}\n      onClose = {props.onClose}\n      buttonText=\"Создать\"\n      onSubmit={handleSubmit}\n    >\n      <input\n        type=\"text\"\n        className=\"popup__form-item popup__form-item_value_pic-name\"\n        placeholder=\"Название\"\n        name=\"picName\"\n        id=\"pic-name\"\n        minLength=\"2\"\n        maxLength=\"30\"\n        required\n        value={name}\n        onChange={(e) => setName(e.target.value)}\n      />\n      <span className=\"pic-name-error popup__form-error-msg\"></span>\n      <input\n        type=\"url\"\n        className=\"popup__form-item popup__form-item_value_link\"\n        placeholder=\"Ссылка на картинку\"\n        name=\"picLink\"\n        id=\"pic-link\"\n        required\n        value={link}\n        onChange={(e) => setLink(e.target.value)}\n      />\n      <span className =\"pic-link-error popup__form-error-msg popup__form-error-msg_pos_bottom\"></span>\n    </PopupWithForm>\n  )\n}\n","export default function ImagePopup(props) {\n  return (\n    <div\n      className={`popup popup_type_image ${props.isOpen ? 'popup_opened' : ''}`}\n      onClick = {props.onClose}\n    >\n      <figure className=\"popup__figure\" onClick = {(e) => e.stopPropagation()}>\n        <button\n          type=\"button\"\n          className=\"popup__close-button\"\n          aria-label=\"Закрыть окно\"\n          onClick={props.onClose}\n        ></button>\n        <img src={props.data.link} alt={props.data.name} className=\"popup__image\"/>\n        <figcaption className=\"popup__caption\">{props.data.name}</figcaption>\n      </figure>\n    </div>\n  )\n}\n","export default function InfoTooltip(props) {\n  return (\n    <div\n      className={`popup popup_type_${props.name} ${props.isOpen ? 'popup_opened' : ''}`}\n      onClick = {props.onClose}\n    >\n\n      <div className=\"popup__container\" onClick = {(e) => e.stopPropagation()}>\n        <button\n            type=\"button\"\n            className=\"popup__close-button\"\n            aria-label=\"Закрыть окно\"\n            onClick={props.onClose}\n        ></button>\n\n        <div className={`popup__success ${props.isSuccess ? \"\" : \"popup__success_type_unsuccess\"}`} ></div>\n\n        <h3 className=\"popup__heading popup__heading_type_info-tooltip\">{`${props.isSuccess ? \"Вы успешно зарегистрировались!\" : \"Что-то пошло не так! Попробуйте еще раз.\"}`}</h3>\n\n      </div>\n    </div>\n  )\n}\n","import { useState } from 'react';\n\n\nexport default function Login({ onLoginSubmit }) {\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onLoginSubmit(password, email);\n  }\n\n  return (\n    <div className=\"login\">\n      <h3 className=\"login__heading\">Вход</h3>\n      <form className={`login__form`} onSubmit = {handleSubmit}>\n\n        <input\n          type=\"email\"\n          className=\"login__form-item\"\n          placeholder=\"E-mail\"\n          name=\"email\"\n          id=\"email\"\n          required\n          value={email || ''}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n\n        <input\n          type=\"password\"\n          className=\"login__form-item\"\n          placeholder=\"Пароль\"\n          name=\"password\"\n          id=\"password\"\n          required\n          value={password || ''}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n\n        <button\n          type=\"submit\"\n          className=\"login__submit-button\"\n          aria-label=\"Отправить данные\"\n        >Войти</button>\n\n      </form>\n    </div>\n  )\n}\n","import { Link } from 'react-router-dom';\nimport { useState } from 'react';\n\n\nexport default function Register({ onRegisterSubmit }) {\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onRegisterSubmit(password, email);\n  }\n\n  return (\n    <div className=\"register\">\n      <h3 className=\"register__heading\">Регистрация</h3>\n      <form className={`register__form`} onSubmit = {handleSubmit}>\n\n        <input\n          type=\"email\"\n          className=\"register__form-item\"\n          placeholder=\"E-mail\"\n          name=\"email\"\n          id=\"email\"\n          required\n          value={email || ''}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n\n        <input\n          type=\"password\"\n          className=\"register__form-item\"\n          placeholder=\"Пароль\"\n          name=\"password\"\n          id=\"password\"\n          required\n          value={password || ''}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n\n        <button\n          type=\"submit\"\n          className=\"register__submit-button\"\n          aria-label=\"Отправить данные\"\n        >Зарегистрироваться</button>\n\n      </form>\n      <div className=\"register__login\">\n        <p>Уже зарегистрированы?&nbsp;</p>\n        <Link to=\"login\" className=\"register__login-link\">Войти</Link>\n      </div>\n    </div>\n  )\n}\n","import { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {() =>\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"/login\" />\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;\n","class Api {\n  constructor(config) {\n    this._baseUrl = config.baseUrl;\n    this._headers = config.headers\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n    method: 'GET',\n    headers: this._headers\n    })\n      .then(res => this._handleResponse(res))\n  }\n\n  _handleResponse(res) {\n    if (res.ok) {return res.json()}\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'GET',\n      headers: this._headers}\n    )\n      .then(res => this._handleResponse(res))\n  }\n\n  editUserInfo(data) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    })\n      .then(res => this._handleResponse(res))\n  }\n\n  editUserAvatar(data) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: data.avatar,\n      })\n    })\n      .then(res => this._handleResponse(res))\n  }\n\n  postCard(data) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    })\n      .then(res => this._handleResponse(res))\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n      })\n        .then(res => this._handleResponse(res))\n  }\n\n  _makeLike(cardId) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: this._headers\n      })\n        .then(res => this._handleResponse(res))\n  }\n\n  _makeUnlike(cardId) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n      })\n        .then(res => this._handleResponse(res))\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    if (isLiked) {\n      return this._makeUnlike(cardId)\n    } else {\n      return this._makeLike(cardId)\n    }\n  }\n\n}\n\nconst configApi = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-26',\n  headers: {\n    authorization: 'a37d820a-4f35-49a2-9bb2-cba80f833b0c',\n    'Content-Type': 'application/json'\n  }\n}\n\nexport const api = new Api(configApi);\n","export const BASE_URL = 'https://auth.nomoreparties.co';\n\n\nfunction handleResponse(res) {\n  if (res.ok) {return res.json()}\n  return Promise.reject(`Ошибка: ${res.status}`);\n}\n\n\nexport const register = (password, email) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({password, email})\n  })\n    .then(res => handleResponse(res))\n};\n\n\nexport const authorize = (password, email) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({password, email})\n  })\n    .then(res => handleResponse(res))\n    .then((data) => {\n      localStorage.setItem('jwt', data.token);\n      return data;\n    })\n};\n\n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    }\n  })\n    .then(res => handleResponse(res))\n}\n","import '../index.css';\nimport Header from './Header';\nimport Footer from './Footer';\nimport Main from './Main';\nimport PopupWithForm from './PopupWithForm';\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport ImagePopup from './ImagePopup';\nimport InfoTooltip from './InfoTooltip';\nimport Login from './Login';\nimport Register from './Register';\nimport ProtectedRoute from './ProtectedRoute';\nimport { api } from '../utils/Api';\nimport * as apiAuth from '../utils/apiAuth';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { useState, useEffect } from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\n\n\nfunction App() {\n\n  const history = useHistory();\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isCardDeleteConfirmOpen, setIsCardDeleteConfirmOpen] = useState({isOpen: false, cardToDelete: {}});\n  const [selectedCard, setSelectedCard] = useState({isOpen: false, data: {}})\n  const [currentUser, setCurrentUser] = useState({});\n  const [userData, setUserData] = useState({});\n  const [cards, setCards] = useState([]);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = useState({isOpen: false, isSuccess: true});\n  const [isLoggedIn, setIsLoggedIn] = useState(false)\n\n\n  useEffect(() => {\n    tokenCheck()\n  }, [])\n\n  useEffect(() => {\n    Promise.all([\n      api.getInitialCards(),\n      api.getUserInfo()\n    ])\n      .then(([cards, user]) => {\n        setCards(cards);\n        setCurrentUser(user);\n      })\n      .catch(error => console.log(error))\n  }, [])\n\n  useEffect(() => {\n    const closeByEscape = (event) => {\n      if (event.key === 'Escape') {\n        closeAllPopups();\n      }\n    }\n    document.addEventListener('keydown', closeByEscape)\n    return () => document.removeEventListener('keydown', closeByEscape)\n  }, [])\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsCardDeleteConfirmOpen({isOpen: false, cardToDelete: {}});\n    setSelectedCard({isOpen: false, data: selectedCard.data}); //Если очистить data при закрытии, то появляется неприятное искажение анимации закрытия: удаляется картинка и крестик закрытия перемещается в центр, а потом затухает\n    setIsInfoTooltipPopupOpen({isOpen: false});\n  }\n\n  function handleCardClick(data) {\n    setSelectedCard(\n      {\n        isOpen: true,\n        data: {\n          link: data.link,\n          name: data.name\n        }\n      }\n    )\n  }\n\n  function handleUpdateUser(data) {\n    api.editUserInfo(data)\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(error => console.log(error))\n  }\n\n  function handleUpdateAvatar(data) {\n    api.editUserAvatar(data)\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(error => console.log(error))\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch(error => console.log(error));\n  }\n\n  function handleCardDelete(e, card) {\n    e.preventDefault();\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards(cards => cards.filter(c => c._id !== card._id));\n        closeAllPopups();\n      })\n      .catch(error => console.log(error))\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api.postCard(data)\n    .then(res => {\n      setCards([res, ...cards]);\n      closeAllPopups();\n    })\n    .catch(error => console.log(error))\n  }\n\n  function handleCardDeleteConfirm(card) {\n    setIsCardDeleteConfirmOpen({isOpen: true, cardToDelete: {...card}})\n  }\n\n  function tokenCheck() {\n    const jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      apiAuth.getContent(jwt)\n        .then(res => {\n          setIsLoggedIn(true);\n          setUserData({...res.data})\n          history.push(\"/\")\n        })\n        .catch(error => {\n          console.log(error);\n        })\n    } else {\n      history.push(\"/login\")\n    }\n  }\n\n  function signOut() {\n    localStorage.removeItem('jwt');\n    history.push('/login');\n  }\n\n  function handleRegisterSubmit(password, email) {\n    apiAuth.register(password, email)\n      .then(res => {\n        setIsInfoTooltipPopupOpen({isOpen: true, isSuccess: true})\n        history.push(\"/login\")\n      })\n      .catch(error => {\n        console.log(error);\n        setIsInfoTooltipPopupOpen({isOpen: true, isSuccess: false})\n      })\n  }\n\n  function handleLoginSubmit(password, email) {\n    apiAuth.authorize(password, email)\n      .then(res => {\n        tokenCheck()\n      })\n      .catch(error => {\n        console.log(error);\n      })\n  }\n\n  return (\n    <div className=\"page\">\n      <div className=\"page__content\">\n        <CurrentUserContext.Provider value = {currentUser}>\n\n          <Header onSignOut = {signOut} userData = {userData}/>\n\n          <Switch>\n\n            <ProtectedRoute\n              exact path = \"/\"\n              loggedIn = {isLoggedIn}\n              component = {Main}\n                onEditProfile = {() => setIsEditProfilePopupOpen(true)}\n                onEditAvatar = {() => setIsEditAvatarPopupOpen(true)}\n                onAddPlace = {() => setIsAddPlacePopupOpen(true)}\n                onCardLike = {handleCardLike}\n                onCardDelete = {handleCardDeleteConfirm}\n                onCardClick = {handleCardClick}\n                cards = {cards}\n            />\n\n            <Route path=\"/login\">\n              <Login onLoginSubmit = {handleLoginSubmit}/>\n            </Route>\n\n            <Route path=\"/register\">\n              <Register onRegisterSubmit = {handleRegisterSubmit}/>\n            </Route>\n\n          </Switch>\n\n          <Footer />\n\n          <EditProfilePopup\n            isOpen = {isEditProfilePopupOpen}\n            onClose = {closeAllPopups}\n            onUpdateUser = {handleUpdateUser}\n            onOvelayClick = {closeAllPopups}\n          />\n\n          <EditAvatarPopup\n            isOpen = {isEditAvatarPopupOpen}\n            onClose = {closeAllPopups}\n            onUpdateAvatar = {handleUpdateAvatar}\n          />\n\n          <AddPlacePopup\n            isOpen = {isAddPlacePopupOpen}\n            onClose = {closeAllPopups}\n            onAddPlace = {handleAddPlaceSubmit}\n          />\n\n          <PopupWithForm\n            name=\"delete-card-confirm\"\n            title=\"Вы уверены?\"\n            isOpen = {isCardDeleteConfirmOpen.isOpen}\n            onClose = {closeAllPopups}\n            buttonText=\"Да\"\n            onSubmit = {(e) => {handleCardDelete(e, isCardDeleteConfirmOpen.cardToDelete)}}\n          />\n\n          <ImagePopup\n            {...selectedCard}\n            onClose = {closeAllPopups}\n          />\n\n          <InfoTooltip\n            isOpen = {isInfoTooltipPopupOpen.isOpen}\n            isSuccess = {isInfoTooltipPopupOpen.isSuccess}\n            name=\"info-tooltip\"\n            onClose = {closeAllPopups}\n          />\n\n        </CurrentUserContext.Provider>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport { BrowserRouter } from 'react-router-dom';\n\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>\n  ,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}